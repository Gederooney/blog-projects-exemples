<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Login</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
      tailwind.config = {
        theme: {
          extend: {
            boxShadow: {
              oauthBtn:
                'inset -2px -2px 8px 0px rgba(0, 0, 0, 0.25), 2px 2px 8px 0px rgba(0, 0, 0, 0.25)',
            },
            backgroundImage: {
              auth: 'url("https://images.unsplash.com/photo-1477346611705-65d1883cee1e?q=80&w=2940&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D")',
            },
          },
        },
      }
    </script>
  </head>
  <body>
    <section class="flex w-screen h-screen">
      <div class="m-auto">
        <section class="border bg-gray-50">
          <div class="w-[300px] mx-auto space-y-6 p-6">
            <div class="text-[#002B2F] text-center w-full">
              <a aria-label="" href="/" class="inline-flex items-center gap-1">
                <svg
                  class="h-7 w-7"
                  viewBox="0 0 180 180"
                  fill="none"
                  xmlns="http://www.w3.org/2000/svg">
                  <g opacity="1">
                    <path
                      fill-rule="evenodd"
                      clip-rule="evenodd"
                      d="M0 90C0 40.2944 40.2944 0 90 0C139.706 0 180 40.2944 180 90C180 139.706 139.706 180 90 180H0.0538464C1.36573 177.832 3.1935 175.979 5.53709 174.44C9.35112 171.936 13.846 171.78 18.8198 171.61C26.4968 171.344 35.3185 171.038 44.556 162H89.9997C129.764 162 162 129.764 162 89.9997C162 50.2352 129.764 17.9997 89.9997 17.9997C50.2352 17.9997 17.9997 50.2352 17.9997 89.9997V147.988C12.5624 149.141 6.78205 151.789 0.847016 158.206C0.557418 158.519 0.275079 158.833 0 159.148V90Z"
                      fill="currentColor" />
                    <path
                      fill-rule="evenodd"
                      clip-rule="evenodd"
                      d="M89.9999 35.6603C59.989 35.6603 35.6603 59.989 35.6603 89.9999V142.606C37.7095 142.219 39.632 141.562 41.4074 140.396C48.0943 136.009 50.5823 129.059 48.8698 119.547C54.5266 128.22 56.1104 136.484 53.6213 144.34H89.9999C120.011 144.34 144.34 120.011 144.34 89.9999C144.34 59.989 120.011 35.6603 89.9999 35.6603Z"
                      fill="currentColor" />
                  </g>
                </svg>

                <span class="text-4xl font-bold leading-[.5] select-none"
                  >tailflows</span
                >
              </a>
            </div>
            <div class="">
              <h2 class="sr-only">Connexion</h2>
              <p class="text-xs font-light text-center">connectez vous avec:</p>
            </div>
            <div class="">
              <div class="space-y-3">
                <a
                  href=""
                  class="flex items-center justify-center w-full h-10 gap-2 text-sm border rounded-md bg-[#316FF6]">
                  <span class="inline-block w-4 h-4">
                    <svg
                      xmlns="http://www.w3.org/2000/svg"
                      class="w-full h-full fill-current"
                      viewBox="0 0 24 24">
                      <g
                        fill="none"
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        stroke-width="2">
                        <path d="M0 0h24v24H0z" />
                        <path
                          fill="currentColor"
                          d="M18 2a1 1 0 0 1 .993.883L19 3v4a1 1 0 0 1-.883.993L18 8h-3v1h3a1 1 0 0 1 .991 1.131l-.02.112l-1 4a1 1 0 0 1-.858.75L17 15h-2v6a1 1 0 0 1-.883.993L14 22h-4a1 1 0 0 1-.993-.883L9 21v-6H7a1 1 0 0 1-.993-.883L6 14v-4a1 1 0 0 1 .883-.993L7 9h2V8a6 6 0 0 1 5.775-5.996L15 2z" />
                      </g>
                    </svg>
                  </span>
                  <span> Facebook </span>
                </a>
                <a
                  href=""
                  class="flex items-center justify-center w-full h-10 gap-2 text-sm bg-[#EA4335] border rounded-md">
                  <span class="inline-block w-4 h-4">
                    <svg
                      xmlns="http://www.w3.org/2000/svg"
                      class="w-full h-full fill-current"
                      viewBox="0 0 24 24">
                      <g
                        fill="none"
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        stroke-width="2">
                        <path d="M0 0h24v24H0z" />
                        <path
                          fill="currentColor"
                          d="M12 2a9.96 9.96 0 0 1 6.29 2.226a1 1 0 0 1 .04 1.52l-1.51 1.362a1 1 0 0 1-1.265.06a6 6 0 1 0 2.103 6.836l.001-.004h-3.66a1 1 0 0 1-.992-.883L13 13v-2a1 1 0 0 1 1-1h6.945a1 1 0 0 1 .994.89c.04.367.061.737.061 1.11c0 5.523-4.477 10-10 10S2 17.523 2 12S6.477 2 12 2" />
                      </g>
                    </svg>
                  </span>
                  <span> Google </span>
                </a>
                <a
                  href=""
                  class="flex items-center justify-center w-full h-10 gap-2 text-sm border rounded-md bg-[#000000] text-gray-50">
                  <span class="inline-block w-4 h-4">
                    <svg
                      xmlns="http://www.w3.org/2000/svg"
                      class="w-full h-full fill-current"
                      viewBox="0 0 24 24">
                      <g
                        fill="none"
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        stroke-width="2">
                        <path d="M0 0h24v24H0z" />
                        <path
                          fill="currentColor"
                          d="M16.083 2H12a1 1 0 0 0-1 1v11.5a1.5 1.5 0 1 1-2.519-1.1l.12-.1A1 1 0 0 0 9 12.5V8.174A1 1 0 0 0 7.77 7.2A7.5 7.5 0 0 0 9.5 22l.243-.005A7.5 7.5 0 0 0 17 14.5v-2.7l.311.153c1.122.53 2.333.868 3.59.993A1 1 0 0 0 22 11.95V7.917a1 1 0 0 0-.834-.986a5.005 5.005 0 0 1-4.097-4.096A1 1 0 0 0 16.083 2" />
                      </g>
                    </svg>
                  </span>
                  <span> TikTok </span>
                </a>
              </div>
            </div>
            <div class="">
              <p class="text-xs font-light text-center">ou vos identifiants</p>
            </div>
            <form action="" class="w-full space-y-4">
              <div class="">
                <div class="relative">
                  <span
                    class="absolute block w-3 h-3 -translate-y-1/2 top-1/2 left-1">
                    <svg
                      xmlns="http://www.w3.org/2000/svg"
                      class="w-full h-full fill-current"
                      viewBox="0 0 512 512">
                      <path
                        d="M256 64C150 64 64 150 64 256s86 192 192 192c17.7 0 32 14.3 32 32s-14.3 32-32 32C114.6 512 0 397.4 0 256S114.6 0 256 0S512 114.6 512 256v32c0 53-43 96-96 96c-29.3 0-55.6-13.2-73.2-33.9C320 371.1 289.5 384 256 384c-70.7 0-128-57.3-128-128s57.3-128 128-128c27.9 0 53.7 8.9 74.7 24.1c5.7-5 13.1-8.1 21.3-8.1c17.7 0 32 14.3 32 32v80 32c0 17.7 14.3 32 32 32s32-14.3 32-32V256c0-106-86-192-192-192zm64 192a64 64 0 1 0 -128 0 64 64 0 1 0 128 0z" />
                    </svg>
                  </span>
                  <label
                    for="email"
                    class="absolute text-xs -translate-y-1/2 pointer-events-none top-1/2 left-5">
                    Email
                  </label>
                  <input
                    type="email"
                    name="email"
                    class="w-full h-10 px-5 py-2 text-xs bg-transparent border rounded-md" />
                </div>
              </div>
              <div class="">
                <div class="text-right">
                  <div class="relative">
                    <span
                      class="absolute block w-3 h-3 -translate-y-1/2 top-1/2 left-1">
                      <svg
                        xmlns="http://www.w3.org/2000/svg"
                        class="w-full h-full fill-current"
                        viewBox="0 0 448 512">
                        <path
                          d="M144 144v48H304V144c0-44.2-35.8-80-80-80s-80 35.8-80 80zM80 192V144C80 64.5 144.5 0 224 0s144 64.5 144 144v48h16c35.3 0 64 28.7 64 64V448c0 35.3-28.7 64-64 64H64c-35.3 0-64-28.7-64-64V256c0-35.3 28.7-64 64-64H80z" />
                      </svg>
                    </span>
                    <label
                      for="password"
                      class="absolute text-xs -translate-y-1/2 pointer-events-none top-1/2 left-5">
                      Mot de passe
                    </label>
                    <input
                      type="password"
                      name="password"
                      class="w-full h-10 px-5 py-2 text-xs bg-transparent border rounded-md" />
                    <button
                      class="absolute w-4 h-4 -translate-y-1/2 right-1 top-1/2 togglePasswordVisibility">
                      <span class="inline-block w-4 h-4">
                        <svg
                          xmlns="http://www.w3.org/2000/svg"
                          class="w-full h-full fill-current"
                          viewBox="0 -960 960 960">
                          <path
                            d="M480-320q75 0 127.5-52.5T660-500q0-75-52.5-127.5T480-680q-75 0-127.5 52.5T300-500q0 75 52.5 127.5T480-320Zm0-72q-45 0-76.5-31.5T372-500q0-45 31.5-76.5T480-608q45 0 76.5 31.5T588-500q0 45-31.5 76.5T480-392Zm0 192q-146 0-266-81.5T40-500q54-137 174-218.5T480-800q146 0 266 81.5T920-500q-54 137-174 218.5T480-200Zm0-300Zm0 220q113 0 207.5-59.5T832-500q-50-101-144.5-160.5T480-720q-113 0-207.5 59.5T128-500q50 101 144.5 160.5T480-280Z" />
                        </svg>
                      </span>
                    </button>
                  </div>
                  <a href="" class="text-xs">Mot de passe oublié?</a>
                </div>
              </div>
              <div class="relative">
                <button
                  type="submit"
                  class="text-xs py-2 px-4 border bg-[#002B2F] w-1/2 text-center text-gray-50 rounded-md">
                  Se connecter
                </button>
              </div>
              <div class="relative">
                <div class="flex items-center">
                  <input
                    checked
                    id="checked-checkbox"
                    type="checkbox"
                    value=""
                    class="w-4 h-4 text-red-600 bg-gray-100 border-gray-300 rounded" />
                  <label
                    for="checked-checkbox"
                    class="text-sm font-medium ms-2">
                    Se souvenir de moi
                  </label>
                </div>
              </div>
              <div class="">
                <p class="text-xs font-light text-center">
                  Vous n'avez pas de compte?
                  <a href="" class="font-bold">Créez-en ici</a>
                </p>
              </div>
            </form>
          </div>
        </section>
      </div>
    </section>

    <script type="text/javascript">
      class Authentification {
        constructor() {
          this.inputs = document.querySelectorAll('input')
          this.togglePasswordVisibilityBtns = document.querySelectorAll(
            '.togglePasswordVisibility'
          )
          this.formData = {}
        }

        isValidEmail(email) {
          // write an email testing regex
          const regex = /^[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+.[A-Za-z]{2,}$/
          return regex.test(email)
        }

        isValidPassword(password) {
          // write a regex to check if password is at least
          //8cha has a special char, an uppercase a lowercase and a number
          const regex = new RegExp(
            '(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[^A-Za-z0-9])(?=.{8,})'
          )
          return regex.test(password)
        }

        isMatchPassword(confirmPassword) {
          return this.formData.password === confirmPassword
        }

        // login logic goes here
        login() {}

        // register logic goes here
        register() {}

        // handle input change
        handleChange(e) {
          const { name, value } = e.target

          this.formData[name] = value
          e.target.value = value
          if (!this.validationFunctions[name](value)) {
            e.target.classList.add('error')
          } else {
            e.target.classList.remove('error')
          }
        }

        // reset form
        reset() {
          this.inputs.forEach((input) => {
            input.value = ''
            input.classList.remove('error')
            if (input.name === 'password' || input.name === 'confirmPassword')
              input.type = 'password'
          })
          this.togglePasswordVisibilityBtns.forEach((btn) => {
            btn.classList.remove('active')
          })
          this.formData = {}
        }
        // switch between login and signup

        // init the authentification
        init() {
          // validation functions
          this.validationFunctions = {
            email: this.isValidEmail,
            password: this.isValidPassword,
            confirmPassword: this.isMatchPassword,
          }
          const btns = document.querySelectorAll('.toggle')
          btns.forEach((btn) => {
            btn.addEventListener('click', (e) => {
              e.preventDefault()
              this.toggle()
              this.reset()
              this.action = this.action === 'login' ? 'signup' : 'login'
            })
          })

          // handleSubmit
          const submitBtns = document.querySelectorAll('button[type="submit"]')
          submitBtns.forEach((btn) => {
            btn.addEventListener('click', (e) => {
              e.preventDefault()
              const fields = Object.keys(this.formData)

              //   check if all fields are filled
              if (
                (fields.length !== 2 && this.action === 'login') ||
                (fields.length !== 3 && this.action === 'signup')
              )
                return

              // check if all fields are valid
              const isInvalid = fields.some(
                (field) =>
                  !this.validationFunctions[field](this.formData[field])
              )

              if (isInvalid) return

              this.action === 'login' ? this.login() : this.register()
            })
          })

          // handle input change
          this.inputs.forEach((input) => {
            input.addEventListener('input', (e) => this.handleChange(e))
            input.addEventListener('focus', (e) => {
              document
                .querySelector(`label[for="${e.target.name}"]`)
                .classList.add('sr-only')
            })

            input.addEventListener('blur', (e) => {
              if (e.target.value !== '') {
                document
                  .querySelector(`label[for="${e.target.name}"]`)
                  .classList.add('sr-only')
              } else {
                document
                  .querySelector(`label[for="${e.target.name}"]`)
                  .classList.remove('sr-only')
              }
            })
          })

          //  togglePasswordVisibility
          this.togglePasswordVisibilityBtns.forEach((btn) => {
            btn.addEventListener('click', function (e) {
              e.preventDefault()
              const input = this.parentElement.querySelector('input')
              if (input.type === 'password') {
                input.type = 'text'
                this.classList.add('active')
              } else {
                input.type = 'password'
                this.classList.remove('active')
              }
            })
          })
        }
      }

      const auth = new Authentification()
      auth.init()
    </script>
  </body>
</html>
